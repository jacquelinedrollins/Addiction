{"version":3,"sources":["webpack:///./src/pages/profile/edit-profile/edit-profile.module.ts","webpack:///./src/pages/profile/edit-profile/edit-profile.page.html","webpack:///./src/pages/profile/edit-profile/edit-profile.page.scss","webpack:///./src/pages/profile/edit-profile/edit-profile.page.ts"],"names":[],"mappings":"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","file":"pages-profile-edit-profile-edit-profile-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditProfilePage } from './edit-profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditProfilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule, ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [EditProfilePage]\n})\nexport class EditProfilePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/tabs/profile\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Edit Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div margin-top text-center tappable (click)=\\\"changeAvatar()\\\">\\n\\t\\t<div class=\\\"img\\\" [ngStyle]=\\\"{'background-image': 'url(' + (normalize(avatar) || 'assets/img/user.jpg') + ')'}\\\"></div>\\n\\t\\t<p>Change Avatar</p>\\n\\t</div>\\n\\t<ion-list no-margin padding margin-top>\\n\\t\\t<form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"submit()\\\" autocomplete=\\\"off\\\">\\n\\t\\t<ion-item no-padding [class.invalid]=\\\"form.get('name') && form.get('name').invalid\\\">\\n\\t\\t\\t<ion-label position=\\\"floating\\\">Name</ion-label>\\n\\t\\t\\t<ion-input #input formControlName=\\\"name\\\" name=\\\"name\\\" autocomplete=\\\"off\\\" [value]=\\\"auth.user.name\\\" type=\\\"text\\\" required placeholder=\\\"John Doe\\\"></ion-input>\\n\\t\\t</ion-item>\\n\\t\\t<div class=\\\"error\\\" *ngIf=\\\"form.get('name') && form.get('name').hasError('required') && (form.get('name').touched || form.get('name').dirty)\\\">Name is required</div>\\n\\n\\t\\t<ion-item no-padding [class.invalid]=\\\"form.get('dob') && form.get('dob').invalid\\\">\\n\\t\\t\\t<ion-label position=\\\"floating\\\">Date of Birth</ion-label>\\n\\t\\t\\t<ion-datetime [value]=\\\"auth.user.dob || '1994-12-15'\\\" name=\\\"dob\\\" displayFormat=\\\"YYYY-MM-DD\\\" pickerFormat=\\\"YYYY-MM-DD\\\" formControlName=\\\"dob\\\" min=\\\"1950\\\"></ion-datetime>\\n\\t\\t</ion-item>\\n\\t\\t<div class=\\\"error\\\" *ngIf=\\\"form.get('dob') && form.get('dob').hasError('required') && (form.get('dob').touched || form.get('dob').dirty)\\\">Date of Birth is required</div>\\n\\t\\t\\n\\t\\t<div margin-top>\\n\\t\\t\\t<ion-button type=\\\"submit\\\" tappable margin-top shape=\\\"round\\\" expand=\\\"block\\\" [disabled]=\\\"form.invalid\\\">Save</ion-button>\\n\\t\\t</div>\\n\\t\\t</form>\\n\\t</ion-list>\\n</ion-content>\\n\"","module.exports = \".img {\\n  width: 80px;\\n  height: 80px;\\n  border-radius: 50%;\\n  margin: 0 auto;\\n  border: 1px solid #ddd; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXJ6YWlsaGFtaS9Ecm9wYm94L2lvbmljcHJlbWl1bS9hdXRoeTIvc3JjL3BhZ2VzL3Byb2ZpbGUvZWRpdC1wcm9maWxlL2VkaXQtcHJvZmlsZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2Qsc0JBQXNCLEVBQUEiLCJmaWxlIjoic3JjL3BhZ2VzL3Byb2ZpbGUvZWRpdC1wcm9maWxlL2VkaXQtcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1ne1xuICAgIHdpZHRoOiA4MHB4O1xuICAgIGhlaWdodDogODBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AuthService, PhotoLibraryService, LoadingService, ToastService } from 'src/services/services';\nimport { NavController, Platform, ActionSheetController } from '@ionic/angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { Crop } from '@ionic-native/crop/ngx';\n\n@Component({\n  selector: 'app-edit-profile',\n  templateUrl: './edit-profile.page.html',\n  styleUrls: ['./edit-profile.page.scss'],\n})\nexport class EditProfilePage implements OnInit {\n  public form: FormGroup;\n  private changePic: boolean;\n  public avatar: any;\n  private win: any = window;\n\n  constructor(public auth: AuthService, private photo: PhotoLibraryService, private platform: Platform, private crop: Crop, private camera: Camera, private action: ActionSheetController, private toast: ToastService, private nav: NavController,\n    private loading: LoadingService, private fb: FormBuilder) {}\n\n  ngOnInit() {\n    this.form = this.fb.group({\n      name: [this.auth.user.name, Validators.required],\n      dob: [this.auth.user.dob]\n    });\n\n    this.avatar = this.auth.user.avatar;\n  }\n\n  async changeAvatar() {\n    const actionSheet = await this.action.create({\n      header: 'Change avatar via gallery or camera',\n      buttons: [{\n          text: 'Album',\n          handler: () => {\n            this.takeGallery();\n          }\n        }, {\n          text: 'Camera',\n          handler: () => {\n            this.takePicture();\n          }\n        }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n  takeGallery() {\n    const options: CameraOptions = { quality: 100, correctOrientation: true, encodingType: this.camera.EncodingType.JPEG, sourceType: this.camera.PictureSourceType.PHOTOLIBRARY, mediaType: this.camera.PictureSourceType.PHOTOLIBRARY };\n    this.camera.getPicture(options).then((data) => {\n      this.crop.crop(data, {quality: 100}).then(newImage => {\n          this.avatar = newImage;\n          this.changePic = true;\n      }, (err) => {\n        this.changePic = false;\n        console.log(err);\n        this.toast.showWithClose(err);\n      });\n    }, (err) => {\n      console.log(err);\n      this.toast.showWithClose(err);\n    });\n  }\n\n  takePicture() {\n    const options: CameraOptions = { quality: 80, correctOrientation: true, encodingType: this.camera.EncodingType.JPEG };\n    this.camera.getPicture(options).then((data) => {\n      this.crop.crop(data, {quality: 100, targetWidth: 480}).then((newImage) => {\n        this.avatar = newImage;\n        this.changePic = true;\n      }, (err) => {\n        this.changePic = false;\n        console.log(err);\n        this.toast.showWithClose(err);\n      });\n    }, (err) => {\n      console.log(err);\n      this.toast.showWithClose(err);\n    });\n  }\n\n  normalize(url) {\n    return this.win.Ionic.WebView.convertFileSrc(url);\n  }\n\n  submit() {\n    this.loading.present();\n    if (this.changePic) {\n      this.photo.uploadImage(this.normalize(this.avatar), `authy/user/${this.auth.user.uid}.jpg`).then((res) => {\n        const tmp = this.form.value;\n        tmp.avatar = res;\n        if (res) {\n          this.auth.updateProfile(tmp).then((q: any) => {\n            this.loading.dismiss();\n            this.toast.show(q);\n          }, (err) => {\n            console.log(err);\n            this.loading.dismiss();\n            this.toast.showWithClose(err);\n          });\n        }\n      }, (err) => {\n        console.log(err);\n        this.loading.dismiss();\n        this.toast.showWithClose(err.message);\n      });\n    } else {\n      this.auth.updateProfile(this.form.value).then((q: any) => {\n        this.toast.show(q);\n        this.loading.dismiss();\n      }, (err) => {\n        console.log(err);\n        this.toast.showWithClose(err);\n        this.loading.dismiss();\n      });\n    }\n  }\n\n}\n"],"sourceRoot":""}