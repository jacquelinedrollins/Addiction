(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"8vjf":function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=u("mrSG"),o=u("gIcY"),i=(u("o+EG"),u("ZZ/e")),a=u("Pn9U"),r=u("y24p"),s=function(){function l(l,n,u,t,e,o,i,a,r,s){this.auth=l,this.photo=n,this.platform=u,this.crop=t,this.camera=e,this.action=o,this.toast=i,this.nav=a,this.loading=r,this.fb=s,this.win=window}return l.prototype.ngOnInit=function(){this.form=this.fb.group({name:[this.auth.user.name,o.q.required],dob:[this.auth.user.dob]}),this.avatar=this.auth.user.avatar},l.prototype.changeAvatar=function(){return e.b(this,void 0,void 0,function(){var l=this;return e.e(this,function(n){switch(n.label){case 0:return[4,this.action.create({header:"Change avatar via gallery or camera",buttons:[{text:"Album",handler:function(){l.takeGallery()}},{text:"Camera",handler:function(){l.takePicture()}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},l.prototype.takeGallery=function(){var l=this;this.camera.getPicture({quality:100,correctOrientation:!0,encodingType:this.camera.EncodingType.JPEG,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,mediaType:this.camera.PictureSourceType.PHOTOLIBRARY}).then(function(n){l.crop.crop(n,{quality:100}).then(function(n){l.avatar=n,l.changePic=!0},function(n){l.changePic=!1,console.log(n),l.toast.showWithClose(n)})},function(n){console.log(n),l.toast.showWithClose(n)})},l.prototype.takePicture=function(){var l=this;this.camera.getPicture({quality:80,correctOrientation:!0,encodingType:this.camera.EncodingType.JPEG}).then(function(n){l.crop.crop(n,{quality:100,targetWidth:480}).then(function(n){l.avatar=n,l.changePic=!0},function(n){l.changePic=!1,console.log(n),l.toast.showWithClose(n)})},function(n){console.log(n),l.toast.showWithClose(n)})},l.prototype.normalize=function(l){return this.win.Ionic.WebView.convertFileSrc(l)},l.prototype.submit=function(){var l=this;this.loading.present(),this.changePic?this.photo.uploadImage(this.normalize(this.avatar),"authy/user/"+this.auth.user.uid+".jpg").then(function(n){var u=l.form.value;u.avatar=n,n&&l.auth.updateProfile(u).then(function(n){l.loading.dismiss(),l.toast.show(n)},function(n){console.log(n),l.loading.dismiss(),l.toast.showWithClose(n)})},function(n){console.log(n),l.loading.dismiss(),l.toast.showWithClose(n.message)}):this.auth.updateProfile(this.form.value).then(function(n){l.toast.show(n),l.loading.dismiss()},function(n){console.log(n),l.toast.showWithClose(n),l.loading.dismiss()})},l}(),b=function(){return function(){}}(),c=u("pMnS"),d=u("oBZk"),h=u("Ip0R"),p=u("ZETX"),g=u("2aXN"),m=u("DcA+"),f=u("H6TV"),v=t.ob({encapsulation:0,styles:[[".img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;margin:0 auto;border:1px solid #ddd}"]],data:{}});function y(l){return t.Fb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","error"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["Name is required"]))],null,null)}function C(l){return t.Fb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","error"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["Date of Birth is required"]))],null,null)}function k(l){return t.Fb(0,[(l()(),t.qb(0,0,null,null,11,"ion-header",[],null,null,null,d.O,d.k)),t.pb(1,49152,null,0,i.B,[t.h,t.k],null,null),(l()(),t.qb(2,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,d.gb,d.C)),t.pb(3,49152,null,0,i.Bb,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.qb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.J,d.f)),t.pb(5,49152,null,0,i.l,[t.h,t.k],null,null),(l()(),t.qb(6,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/profile"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.zb(l,8).onClick(u)&&e),e},d.G,d.c)),t.pb(7,49152,null,0,i.g,[t.h,t.k],{defaultHref:[0,"defaultHref"]},null),t.pb(8,16384,null,0,i.h,[[2,i.hb],i.Hb],{defaultHref:[0,"defaultHref"]},null),(l()(),t.qb(9,0,null,0,2,"ion-title",[],null,null,null,d.fb,d.B)),t.pb(10,49152,null,0,i.zb,[t.h,t.k],null,null),(l()(),t.Eb(-1,0,["Edit Profile"])),(l()(),t.qb(12,0,null,null,48,"ion-content",[],null,null,null,d.L,d.h)),t.pb(13,49152,null,0,i.u,[t.h,t.k],null,null),(l()(),t.qb(14,0,null,0,5,"div",[["margin-top",""],["tappable",""],["text-center",""]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.changeAvatar()&&t),t},null,null)),(l()(),t.qb(15,0,null,null,2,"div",[["class","img"]],null,null,null,null,null)),t.pb(16,278528,null,0,h.m,[t.t,t.k,t.E],{ngStyle:[0,"ngStyle"]},null),t.Ab(17,{"background-image":0}),(l()(),t.qb(18,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Eb(-1,null,["Change Avatar"])),(l()(),t.qb(20,0,null,0,40,"ion-list",[["margin-top",""],["no-margin",""],["padding",""]],null,null,null,d.Y,d.t)),t.pb(21,49152,null,0,i.O,[t.h,t.k],null,null),(l()(),t.qb(22,0,null,0,38,"form",[["autocomplete","off"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,o=l.component;return"submit"===n&&(e=!1!==t.zb(l,24).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.zb(l,24).onReset()&&e),"ngSubmit"===n&&(e=!1!==o.submit()&&e),e},null,null)),t.pb(23,16384,null,0,o.s,[],null,null),t.pb(24,540672,null,0,o.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Bb(2048,null,o.a,null,[o.d]),t.pb(26,16384,null,0,o.l,[[4,o.a]],null,null),(l()(),t.qb(27,0,null,null,13,"ion-item",[["no-padding",""]],[[2,"invalid",null]],null,null,d.V,d.p)),t.pb(28,49152,null,0,i.H,[t.h,t.k],null,null),(l()(),t.qb(29,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,d.W,d.s)),t.pb(30,49152,null,0,i.N,[t.h,t.k],{position:[0,"position"]},null),(l()(),t.Eb(-1,0,["Name"])),(l()(),t.qb(32,0,null,0,8,"ion-input",[["autocomplete","off"],["formControlName","name"],["name","name"],["placeholder","John Doe"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0;return"ionBlur"===n&&(e=!1!==t.zb(l,35)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.zb(l,35)._handleInputEvent(u.target.value)&&e),e},d.S,d.o)),t.pb(33,16384,null,0,o.p,[],{required:[0,"required"]},null),t.Bb(1024,null,o.h,function(l){return[l]},[o.p]),t.pb(35,16384,null,0,i.Nb,[t.k],null,null),t.Bb(1024,null,o.i,function(l){return[l]},[i.Nb]),t.pb(37,671744,null,0,o.c,[[3,o.a],[6,o.h],[8,null],[6,o.i],[2,o.u]],{name:[0,"name"]},null),t.Bb(2048,null,o.j,null,[o.c]),t.pb(39,16384,null,0,o.k,[[4,o.j]],null,null),t.pb(40,49152,[["input",4]],0,i.G,[t.h,t.k],{autocomplete:[0,"autocomplete"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"],type:[4,"type"],value:[5,"value"]},null),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(42,16384,null,0,h.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(43,0,null,null,11,"ion-item",[["no-padding",""]],[[2,"invalid",null]],null,null,d.V,d.p)),t.pb(44,49152,null,0,i.H,[t.h,t.k],null,null),(l()(),t.qb(45,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,d.W,d.s)),t.pb(46,49152,null,0,i.N,[t.h,t.k],{position:[0,"position"]},null),(l()(),t.Eb(-1,0,["Date of Birth"])),(l()(),t.qb(48,0,null,0,6,"ion-datetime",[["displayFormat","YYYY-MM-DD"],["formControlName","dob"],["min","1950"],["name","dob"],["pickerFormat","YYYY-MM-DD"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0;return"ionBlur"===n&&(e=!1!==t.zb(l,49)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.zb(l,49)._handleChangeEvent(u.target.value)&&e),e},d.M,d.i)),t.pb(49,16384,null,0,i.Mb,[t.k],null,null),t.Bb(1024,null,o.i,function(l){return[l]},[i.Mb]),t.pb(51,671744,null,0,o.c,[[3,o.a],[8,null],[8,null],[6,o.i],[2,o.u]],{name:[0,"name"]},null),t.Bb(2048,null,o.j,null,[o.c]),t.pb(53,16384,null,0,o.k,[[4,o.j]],null,null),t.pb(54,49152,null,0,i.v,[t.h,t.k],{name:[0,"name"],min:[1,"min"],displayFormat:[2,"displayFormat"],pickerFormat:[3,"pickerFormat"],value:[4,"value"]},null),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(56,16384,null,0,h.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(57,0,null,null,3,"div",[["margin-top",""]],null,null,null,null,null)),(l()(),t.qb(58,0,null,null,2,"ion-button",[["color","secondary"],["expand","block"],["margin-top",""],["shape","round"],["tappable",""],["type","submit"]],null,null,null,d.I,d.e)),t.pb(59,49152,null,0,i.k,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],shape:[3,"shape"],type:[4,"type"]},null),(l()(),t.Eb(-1,0,["Save"]))],function(l,n){var u=n.component;l(n,3,0,"primary"),l(n,7,0,"/tabs/profile"),l(n,8,0,"/tabs/profile");var t=l(n,17,0,"url("+(u.normalize(u.avatar)||"assets/img/user.jpg")+")");l(n,16,0,t),l(n,24,0,u.form),l(n,30,0,"floating"),l(n,33,0,""),l(n,37,0,"name"),l(n,40,0,"off","name","John Doe","","text",u.auth.user.name),l(n,42,0,u.form.get("name")&&u.form.get("name").hasError("required")&&(u.form.get("name").touched||u.form.get("name").dirty)),l(n,46,0,"floating"),l(n,51,0,"dob"),l(n,54,0,"dob","1950","YYYY-MM-DD","YYYY-MM-DD",u.auth.user.dob||"1994-12-15"),l(n,56,0,u.form.get("dob")&&u.form.get("dob").hasError("required")&&(u.form.get("dob").touched||u.form.get("dob").dirty)),l(n,59,0,"secondary",u.form.invalid,"block","round","submit")},function(l,n){var u=n.component;l(n,22,0,t.zb(n,26).ngClassUntouched,t.zb(n,26).ngClassTouched,t.zb(n,26).ngClassPristine,t.zb(n,26).ngClassDirty,t.zb(n,26).ngClassValid,t.zb(n,26).ngClassInvalid,t.zb(n,26).ngClassPending),l(n,27,0,u.form.get("name")&&u.form.get("name").invalid),l(n,32,0,t.zb(n,33).required?"":null,t.zb(n,39).ngClassUntouched,t.zb(n,39).ngClassTouched,t.zb(n,39).ngClassPristine,t.zb(n,39).ngClassDirty,t.zb(n,39).ngClassValid,t.zb(n,39).ngClassInvalid,t.zb(n,39).ngClassPending),l(n,43,0,u.form.get("dob")&&u.form.get("dob").invalid),l(n,48,0,t.zb(n,53).ngClassUntouched,t.zb(n,53).ngClassTouched,t.zb(n,53).ngClassPristine,t.zb(n,53).ngClassDirty,t.zb(n,53).ngClassValid,t.zb(n,53).ngClassInvalid,t.zb(n,53).ngClassPending)})}function q(l){return t.Fb(0,[(l()(),t.qb(0,0,null,null,1,"app-edit-profile",[],null,null,null,k,v)),t.pb(1,114688,null,0,s,[p.a,g.a,i.Jb,r.a,a.a,i.a,m.a,i.Hb,f.a,o.b],null,null)],function(l,n){l(n,1,0)},null)}var z=t.mb("app-edit-profile",s,q,{},{},[]),P=u("ZYCi");u.d(n,"EditProfilePageModuleNgFactory",function(){return x});var x=t.nb(b,[],function(l){return t.wb([t.xb(512,t.j,t.cb,[[8,[c.a,z]],[3,t.j],t.x]),t.xb(4608,h.l,h.k,[t.u,[2,h.u]]),t.xb(4608,o.t,o.t,[]),t.xb(4608,o.b,o.b,[]),t.xb(4608,i.c,i.c,[t.z,t.g]),t.xb(4608,i.Gb,i.Gb,[i.c,t.j,t.q,h.c]),t.xb(4608,i.Kb,i.Kb,[i.c,t.j,t.q,h.c]),t.xb(1073742336,h.b,h.b,[]),t.xb(1073742336,o.r,o.r,[]),t.xb(1073742336,o.f,o.f,[]),t.xb(1073742336,o.o,o.o,[]),t.xb(1073742336,i.Db,i.Db,[]),t.xb(1073742336,P.o,P.o,[[2,P.u],[2,P.m]]),t.xb(1073742336,b,b,[]),t.xb(1024,P.k,function(){return[[{path:"",component:s}]]},[])])})}}]);